---
description: 
globs: 
alwaysApply: true
---
# 要求仕様書：暴飲暴食抑制アプリ

## 1. 概要

* **目的**
  暴飲暴食を止めさせ、緩和させることでユーザーの健康維持とストレス軽減を支援する。
* **ターゲットユーザー**
  20〜50代の男女で、健康・ダイエット目的の運動を行うが食事制限が難しい、またはストレスで過食傾向にある人。

## 2. 機能要件

### 2.1 主要機能

1. **行動ログ記録**（フリーテキスト入力）

   * 下部固定のテキスト入力欄＋送信アイコンで即記録。
2. **AIフィードバック**

   * 記録ログに対して、端末内Foundation Modelで優しく慰めたり、達成時には「○○ kcal防いだ」と定量的に表示。
3. **可視化ダッシュボード**

   * 今日までの「記録回数」「防いだカロリー数」「継続日数」の３指標をカードで表示。
4. **ログ履歴一覧**

   * タイムスタンプ＋テキストプレビューの縦スクロールリスト。タップで詳細フィードバックをモーダル表示。
5. **習慣化サポート**

   * プラスボタンの浮き上がるアニメーション、初回チュートリアル表示などインタラクティブUX。
6. **マネタイズ：広告バナー**

   * 画面最下部に常設。ユーザー邪魔にならない最低限の表示。

## 3. 非機能要件

1. **ユーザー登録不要**

   * 氏名・メールなし。匿名利用可能。
2. **ローカル完結AI処理**

   * WWDC2025のFoundation Modelフレームワークを用い、会話ログは外部送信せず端末内完結。
3. **オフライン対応**

   * 行動ログ記録・フィードバック閲覧はネット不要。
4. **プライバシー保護**

   * 端末内データは暗号化保存。ユーザー許可がない限りプッシュ通知は動作しない。

## 4. UI／画面構成（MVP）

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ タイトルバー：ロゴ＋日付              ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━━━━┳━━━━━━━━━━━━┳━━━━┓
┃ 記録回数 ┃ 防いだカロリー数 ┃ 継続日数 ┃
┗━━━━┻━━━━━━━━━━━━┻━━━━┛
─────────────────────────────────────
［行動ログ一覧］
・2025/06/25 22:10 “夜中にアイスを…”
・2025/06/24 19:05 “お昼にデザート我慢…”
…
─────────────────────────────────────
┌───────────────────────────────┐
│ テキスト入力欄（placeholder：
│ “今日の行動を入力…”）＋送信アイコン │
└───────────────────────────────┘
[広告バナー]
```

* **詳細**

  * ホーム画面のみで完結。
  * ログ入力は下部固定欄＋即送信。
  * カード部分はキーカラー（グリーン系）で強調。
  * ログ一覧は日付区切り・アイコンタグ追加を検討。

## 5. 技術要件

* **プラットフォーム**：iOS 17以降
* **UI実装**：SwiftUI
* **AI処理**：Foundation Modelフレームワークによるローカル推論
* **データ保存**：端末内CoreData or SQLite or SwiftData（推奨）（※暗号化マスト）
* **通知**：UNUserNotificationCenter（ユーザー許可必須）
* **広告**：Google Mobile Ads SDK 等

## 6. 拡張性・将来要件

* プリセット選択肢・感情タグ機能の追加
* 写真添付ログ入力
* カード統計の横スワイプ表示（週間・月間推移）
* ゲーミフィケーション要素（バッジ・レベル）

---
